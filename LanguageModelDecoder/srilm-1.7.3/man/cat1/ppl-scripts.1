ppl-scripts(1)              General Commands Manual             ppl-scripts(1)



NNAAMMEE
       ppl-scripts,  add-ppls,  compare-ppls,  compute-best-mix, compute-best-
       sentence-mix, filter-event-counts,  hits-from-log,  ppl-from-log,  sub-
       tract-ppls - manipulate perplexities

SSYYNNOOPPSSIISS
       aadddd--ppppllss [ _p_p_l_-_f_i_l_e ... ]
       ssuubbttrraacctt--ppppllss _p_p_l_-_f_i_l_e_1 [ _p_p_l_-_f_i_l_e_2 ... ]
       ppppll--ffrroomm--lloogg [ _p_p_l_-_f_i_l_e ... ]
       hhiittss--ffrroomm--lloogg [ _p_p_l_-_f_i_l_e ... ]
       ccoommppaarree--ppppllss [ mmiinnddeellttaa==_D ] _p_p_l_-_f_i_l_e_1 _p_p_l_-_f_i_l_e_2
       ccoommppuuttee--bbeesstt--mmiixx [ llaammbbddaa==''_l_1 _l_2 ...'' ] [ pprreecciissiioonn==_P ] \
            _p_p_l_-_f_i_l_e_1 [ _p_p_l_-_f_i_l_e_2 ... ]
       ccoommppuuttee--bbeesstt--sseenntteennccee--mmiixx [ llaammbbddaa==''_l_1 _l_2 ...'' ] [ pprreecciissiioonn==_P ] \
            [ aaddddoonnee==_c ] _p_p_l_-_f_i_l_e_1 [ _p_p_l_-_f_i_l_e_2 ... ]
       ffiilltteerr--eevveenntt--ccoouunnttss [ oorrddeerr==_N ] [ eessccaappee==_s_t_r_i_n_g_P _] _[ _c_o_u_n_t_s _._._. _]

DDEESSCCRRIIPPTTIIOONN
       These scripts process the output of the nnggrraamm(1) option --ppppll to extract
       various useful information.  They are particularly convenient  in  ana-
       lyzing the performance (perplexity) of language models on specific sub-
       sets of the test data, or to compare and combine multiple models.

       aadddd--ppppllss takes several ppl output files and computes an aggregate  per-
       plexity  and  corpus statistics.  Its output is suitable for subsequent
       manipulation by aadddd--ppppllss or ssuubbttrraacctt--ppppllss.

       ssuubbttrraacctt--ppppllss similarly computes an aggregate  perplexity  by  removing
       the  statistics of zero or more _p_p_l_-_f_i_l_e_2 from those in _p_p_l_-_f_i_l_e_1.  Its
       output is suitable for subsequent manipulation by aadddd--ppppllss or ssuubbttrraacctt--
       ppppllss.

       ppppll--ffrroomm--lloogg  recomputes  the  total  perplexities  and statistics from
       individual lines in nnggrraamm --ddeebbuugg 22 --ppppll  output.   Combined  with  some
       filtering  of  that output this allows computing perplexities on inter-
       esting subsets of words.

       hhiittss--ffrroomm--lloogg computes N-gram hit rates from nnggrraamm --ddeebbuugg 22  --ppppll  out-
       put.

       ccoommppaarree--ppppllss  tallies the number of words for which two language models
       produce the same, higher, or  lower  probabilities.   The  input  files
       should  be  nnggrraamm  --ddeebbuugg  22 --ppppll output for the two models on the same
       test set.  The parameter _D is the minimum absolute difference  for  two
       log probabilities to be considered different (the default is 0).

       ccoommppuuttee--bbeesstt--mmiixx  takes  the output of several nnggrraamm --ddeebbuugg 22 --ppppll runs
       on the same test set and computes the optimal interpolation weights for
       the  corresponding models, i.e., the weights that minimize the perplex-
       ity of an interpolated model.  Initial weights may be specified  as  _l_1
       _l_2  _._._..  The computation is iterative and stops when the interpolation
       weights change by less than _P (default 0.001).

       ccoommppuuttee--bbeesstt--sseenntteennccee--mmiixx similarly optimizes the weights for sentence-
       level interpolation of LMs.  It requires input files generated by nnggrraamm
       --ddeebbuugg 11 --ppppll.  (Sentence-level mixtures can be implemented  using  the
       nnggrraamm  --hhmmmm  option,  by  constructing  a suitable HMM structure.)  The
       aaddddoonnee==_c option performs Laplace smoothing by adding _c to the estimated
       posterior counts for each model.

       ffiilltteerr--eevveenntt--ccoouunnttss  prepares  a count file for for perplexity computa-
       tion.  It removes counts that do not represent events to the  LM.   The
       oorrddeerr==N  option  specifies the maximal N-gram order to use.  The effect
       of filtering is such that
            ngram -order _N -lm _L_M -ppl _T_E_X_T
       and
            ngram-count -order _N -text _T_E_X_T -write - | \
            filter-event-counts order=_N | \
            ngram -order _N -lm _L_M -counts -
       yield the same result.  The eessccaappee==  option  specifies  a  string  that
       causes  all input lines beginning with that string to be passed through
       (useful in combination with nnggrraamm --eessccaappee).

SSEEEE AALLSSOO
       ngram(1), ngram-count(1).

BBUUGGSS
       Most scripts depend on the idiosyncrasies of nnggrraamm --ppppll output.

AAUUTTHHOORR
       Andreas Stolcke <stolcke@icsi.berkeley.edu>
       Copyright (c) 1995-2009 SRI International
       Copyright (c) 2011-2016 Andreas Stolcke
       Copyright (c) 2011-2016 Microsoft Corp.



SRILM Tools              $Date: 2019/09/09 22:35:37 $           ppl-scripts(1)
